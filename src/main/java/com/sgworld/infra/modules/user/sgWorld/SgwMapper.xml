<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sgworld.infra.modules.user.sgWorld.SgwMapper">
	<resultMap id="SgwDto" type="com.sgworld.infra.modules.user.sgWorld.sgwdto.SgwDto">
		<result property="infrMmSeq" column="regByMm"></result>
	</resultMap>
	
	<insert id="buildSgw">
		insert into sgWorld
		(
		sgwTitle
		,isHidden
		,sgwMmNumber
		,sgwMap
		,sgwLink
		,regByMm
		)
		values(
		#{sgwTitle}
		,#{isHidden}
		,#{sgwMmNumber}
		,#{sgwMap}
		,#{sgwLink}
		,#{infrMmSeq}
		)
	</insert>
	<select id="selectSgwOne" resultMap="SgwDto">
		select * 
		from sgWorld 
		where 1=1
		and 
		order by sgwSeq limit 1;
	</select>
	<select id="goMySgw" resultMap="SgwDto">
		select sgwLink
		from sgWorld
		where 1=1
		and  regByMm = #{infrMmSeq}
	</select>
	<select id="isDupleLink" resultType="Integer">
		select count(*)
		from sgWorld
		where 1=1
		and  sgwLink = #{sgwLink}
	</select>
	<select id="doesHealreadyMakeSgw" resultType="Integer">
		select count(*)
		from sgWorld 
		where 1=1
		and  regByMm = #{infrMmSeq}
	</select>
</mapper>