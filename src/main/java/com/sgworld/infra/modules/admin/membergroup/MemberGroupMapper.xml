<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sgworld.infra.modules.admin.membergroup.MemberGroupMapper">

	<resultMap id="MemberGroup" type="com.sgworld.infra.modules.admin.membergroup.MemberGroup"></resultMap>
	
	<select id="selectMmList" resultMap="MemberGroup">
		select * from infrMember
	</select>
	
	<select id="selectMmOne" resultMap="MemberGroup">
		select * from infrMember
		WHERE 1=1 
		AND infrMmSeq = #{infrMmSeq}
	</select>
	
	<select id="selectUserLogin" resultMap="MemberGroup">
		select 
			infrMmId
			,infrMmPw
			,infrMmSeq
			,infrMmName
			from infrMember
		where 1=1
		and infrMmId = #{infrMmId}
		and infrMmPw = #{infrMmPw}
	</select>
	
	<select id="isduple" resultType="Integer">
		select count(*)
	<choose>
		<when test="dupleValiObj ==  'infrMmId'">
			from infrMember 
			where 
			infrMmId = #{shDupleStr}
		</when>
		<when test="dupleValiObj ==  'infrMmName'">
			from infrMember 
			where 
			infrMmName = #{shDupleStr}
		</when>
		<when test="dupleValiObj ==  'infrMmNickname'">
			from infrMember 
			where 
			infrMmNickname = #{shDupleStr}
		</when>
		<when test="dupleValiObj ==  'infrMmPhone'">
			from infrMember 
			where 
			infrMmPhone = #{shDupleStr}
		</when>
		</choose>
	</select>
	
	<insert id="insertMmSignIn">
	insert into infrMember(
	  infrMmId
	  ,infrMmPw
	  ,infrMmName
	  ,infrMmNickname
	  ,infrMmBod
	  ,infrMmGender
	  ,infrMmTelecom
	  ,infrMmPhone
	  ,infrMmEmailId
	  ,infrMmEmailAddress
	  ,infrMmZip
	  ,infrMmRoadAddress
	  ,infrMmJibunAddress
	  ,infrMmDetailAddress
	  ,infrMmExtraAddress
	  ,infrMmLat
	  ,infrMmLong
	  ,regDatetime
	) values(
	  #{infrMmId}
	  ,MD5(#{infrMmPw})
	  ,#{infrMmName}
	  ,#{infrMmNickname}
	  ,#{infrMmBod}
	  ,#{infrMmGender}
	  ,#{infrMmTelecom}
	  ,#{infrMmPhone}
	  ,#{infrMmEmailId}
	  ,#{infrMmEmailAddress}
	  ,#{infrMmZip}
	  ,#{infrMmRoadAdress}
	  ,#{infrMmJibunAdress}
	  ,#{infrMmDetailAdress}
	  ,#{infrMmExtraAddress}
	  ,#{infrMmLat}
	  ,#{infrMmLong}
	  ,now()
	)
	</insert>
</mapper>
